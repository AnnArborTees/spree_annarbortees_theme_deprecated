


<%= form_for :order, :url => populate_orders_path do |f| %>
    <div id="inside-product-cart-form" data-hook="inside_product_cart_form" itemprop="offers" itemscope itemtype="http://schema.org/Offer">

 <!--
      <ul id="test-radio">
        <li><label for="radio1">label 1</label><span></span><input type="radio" id="radio1" name="myRadio" checked="checked"/><span></span></li>
        <li><label for="radio2">label 2</label><span></span><input type="radio" id="radio2" name="myRadio" /><span></span></li>
        <li><label for="radio3">label 3</label><span></span><input type="radio" id="radio3" name="myRadio" /><span></span></li>
        <li><label for="radio4">label 4</label><span></span><input type="radio" id="radio4" name="myRadio" /><span></span></li>
      </ul>
 -->
      <% if @product.variants_and_option_values(current_currency).any? %>
          <div id="product-variants" class="columns six alpha">
            <ul>
              <br />
              <% @product.variants_and_option_values(current_currency).each_with_index do |variant, index| %>

                  <li class="<%= 'selected' unless !(index == 0 and variant.can_supply?) %> <%= 'out-of-stock' unless variant.can_supply? %>">

                    <%= radio_button_tag "variant_id", variant.id, index == 0, 'data-price' => Spree::Money.new(variant.price, with_currency: true).to_s, 'disabled' => !variant.can_supply?  %>

                    <%= label_tag "variant_id_#{ variant.id }", class: 'columns three' do %>

                        <span class="variant-description">
                            <%= variant_options variant %>
                        </span>

                        <% unless variant.can_supply? %>
                            <span class="out-of-stock"><%= Spree.t(:out_of_stock) %></span>
                        <% end %>

                    <% end %>
                  </li>
            <% end%>
            </ul>
          </div>
      <% else %>
          <%= hidden_field_tag "variant_id", @product.master.id %>
      <% end %>

      <% if @product.price_in(current_currency) and !@product.price.nil? %>
          <div data-hook="product_price" class="columns five <% if !@product.has_variants? %> alpha <% else %> omega <% end %>">

            <div id="product-price">
              <h6 class="product-section-title"><%= Spree.t(:price) %></h6>
              <div>
            <span class="price selling" itemprop="price">
              <%= display_price(@product) %>
            </span>
                <span itemprop="priceCurrency" content="<%= @product.currency %>"></span>
              </div>

              <% if @product.master.can_supply? %>
                  <link itemprop="availability" href="http://schema.org/InStock" />
              <% elsif @product.variants.empty? %>
                  <br />
                  <span class="out-of-stock"><%= Spree.t(:out_of_stock) %></span>
              <% end %>
            </div>

            <div class="add-to-cart">
              <%= number_field_tag :quantity, 1, :class => 'title', :min => 1 %>
              <%= button_tag :class => 'large primary', :id => 'add-to-cart-button', :type => :submit do %>
                  <%= Spree.t(:add_to_cart) %>
              <% end %>
            </div>
          </div>
      <% else %>
          <div id="product-price">
            <br>
            <div><span class="price selling" itemprop="price"><%= Spree.t('product_not_available_in_this_currency') %></span></div>
          </div>
      <% end %>
    </div>
<% end %>